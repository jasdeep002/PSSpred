name: PSSpred

on:
  push:
    branches:
      - master

jobs:
  build_docs_and_deploy:
    runs-on: ubuntu-latest
    name: running PSSpred

    steps:
    - name: Checkout
      uses: actions/checkout@master

    - name: running perl
      run: |
         git config --global user.email "ucecwme@ucl.ac.uk"
         git config --global user.name "nickcafferry"
         git init
         echo "Initializing Repository.........."
         
         echo "---------------------------------------------"
         cd ../
         mkdir output
         echo "output file already created!"
         
         echo "---------------------------------------------"
         cd PSSpred/
         cd src/
         mkdir nr
         cd nr/
         wget -O nr.tar.gz https://zhanglab.ccmb.med.umich.edu/cgi-bin/download_ftp.cgi?ID=nr.tar.gz
         tar -zxvf nr.tar.gz
         echo "nr.tar.gz already unpacked!"
         echo "Show the path of this file: "
         pwd
         
         cd ../
         cd PSSpred_v4/
         ./PSSpred.pl seq.fasta
         cp seq.dat /home/runner/work/PSSpred/output/
         cp seq.dat.ss /home/runner/work/PSSpred/output/
         cp blast.out /home/runner/work/PSSpred/output/
         cd /home/runner/work/PSSpred/output/
         ls
         pwd
         
    - uses: actions/upload-artifact@v2
      with:
        name: output results
        path: /home/runner/work/PSSpred/output/       
         
         

